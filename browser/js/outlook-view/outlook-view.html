<div id = "wrapper" class = "view-height-main">
    <div class = "wrapper wrapper-content animated fadeIn" style="padding-top:10px;">
        <div class = "p-w-md m-t-sm">
            <div class="row" style="height: 80vh;">
        <div class="col-lg-5 animated fadeInRight">
            <div class="mail-box-header" style="background-color:#1c84c6; padding: 20px 20px 10px 20px;">
                <h2><span style="color:white; font-size:20px;"> {{table.table_name}}</span><button class = "pull-right btn btn-white btn-sm" ng-click = "generateDDL()">Get DDL</button></h2>
                <div class="mail-tools tooltip-demo m-t-md">
                    <h3 style="color:yellow;"> [System]:<span style="color:white;"> {{table.system_name}}</span></h3>
                    <h3 style="color:yellow;">[Database]: <span style="color:white;"> {{table.db_name}}</span><span style="color:yellow;"> [Schema]:</span><span style="color:white;"> {{table.schema_name}}</span></h3> 
                </div>
            </div>

            <div class="mail-box" style="border:none;">
                <div class="mail-body" style="padding-top:34px;">
                    <div class="row">
                        <div class="col-lg-12" style="max-height:67vh; overflow-y:scroll;">
                            <form role="form">
                                <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Properties</th>
                                        <th>Attribute Name</th>
                                        <th>Business Name</th>
                                        <th>DataType</th>
                                        <th>PII</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-click="selectAttribute(attributes[$index])" ng-repeat = "attribute in attributes track by $index"
                                    ng-class="{{attribute.attr_id}}">
                                        <td><span class = "att-prop-badge" ng-repeat="prop in attribute.properties">{{prop}}</span></td>
                                        <td>{{attribute.attr_name}}</td>
                                        <td>{{attribute.business_name}}</td>
                                        <td>{{attribute.datatype}}</td>
                                        <td><span class = "att-pii-badge" ng-show="{{attribute.pii == true}}"><i class ="fa fa-check" area-hidden="true"></i></span></td>
                                    </tr>
                                </tbody>
                            </table>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7 animated fadeInRight">
            <div class="mail-box-header" style="background-color:#1ab394; padding: 20px 20px 10px 20px;">
                <div class="pull-right tooltip-demo">
                    <div class= "row">
                        <a ng-click="editAttribute()" ng-if="user.power_level ==5 && editing=='none'" class="btn btn-white btn-sm" ><i class="fa fa-pencil"></i></a>
                        <a ng-click = "newSource()" ng-if="editing =='none'" class ="btn btn-white btn-sm"><i class = "fa fa-plus"></i> Source</a>
                        <a ng-if="editing!=='none'" ng-click="save()" class="btn btn-success btn-sm"><i class="fa fa-pencil"></i> Save</a>
                        <a ng-if="editing!=='none'" ng-click="cancel()" class="btn btn-danger btn-sm"><i class="fa fa-pencil"></i> Cancel</a>
                        <a ng-click="deleteSource()" class="btn btn-white btn-sm"><i class="fa fa-trash-o"></i> Source</a>
                    </div>
                    <div class="row">
                        <a ng-click="toggleNotes()" ng-if="permissions" class = "btn btn-white btn-sm">Show {{notes?'Mapping':'Notes'}}</a>
                    </div>
                </div>
                <h2 style="color:white; font-size:20px; ">Attribute Information</h2>
                <div class="mail-tools tooltip-demo m-t-md">
                    <h3 style="color:white;">{{currentAttr}} <span style="color:red;" ng-if="sources[0].mapping_status =='approved'">Approved</span> <span style="color:red;" ng-if="sources[0].mapping_status =='pending'">Pending</span></h3>
                    <div ng-show="sources[0].mapping_status =='incomplete'|| sources[0].mapping_status=='rejected'"><button style="float:right" class="btn btn-caution" ng-click="changeStatus('pending')">Submit for Review</button></div>
                    <div ng-if="user.power_level ==3">
                        <div ng-show="sources[0].mapping_status=='pending'">
                            <button class = "btn btn-danger" style="float:right;" ng-click="changeStatus('rejected')">Decline</button>
                            <button class = "btn btn-info" style="float:right;margin-right:10px;" ng-click="changeStatus('approved')">Approve</button>
                        </div>
                    </div>
                </div>
            </div>
            <div style="background-color:#ffffff;padding-top:24px;">
                <div style="overflow-y:scroll;" ng-if="!notes">
                    <mapping source="sources" target="targetMapping" edit = "editing" temp="temp"></mapping>
                    <rules rules="rules" mapping="sources" user="user"></rules>
                </div>
                <div style="overflow-y:scroll;" ng-if="notes">
                    <notes mapping = "sources" notes="comments" user="user"></notes>
                </div>
            </div>
        </div> 
        
    </div>
</div>

</div>
</div>
